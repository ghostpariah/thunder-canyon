<!DOCTYPE html>
<head>

	<title>Frame & Spring Workflow</title>
	<link rel="stylesheet" type="text/css" href="test.css">
	
	<meta http-equiv="x-ua-compatible" content="ie=10" />
</head>

<script language="JavaScript">
	//global variables
	var xmlDoc = new ActiveXObject('Microsoft.XMLDOM');
	var vehicles = {
		WFW : [],
		WFP : [],
		WIP : [],
		WPU : [],
		SCH : [],
		POS : [],
		NPU : []
	};
	var formInputs = {
		required : [],
		optional : []
	};
	function getFormInputs(){
	formInputs.required.push({
		
			inputs: [{
			"jobType":document.getElementById("selJobType"),
			"origin":document.getElementById("selOrigin"),
			"customerName":document.getElementById("txtCustomerName"),
			"unit":document.getElementById("txtUnit")
			}],
			wrappers : [{
				"jobTypeWrapper": document.getElementById("jobTypeWrapper"),
				"originWrapper": document.getElementById("originWrapper"),
				"customerNameWrapper": document.getElementById("customerNameWrapper"),
				"unitWrapper": document.getElementById("unitWrapper")
			}]
			});
	formInputs.optional.push({
		
			inputs:[{
			"notes":document.getElementById("txtNotes"),
			"cash":document.getElementById("cbCash"),
			"cost":document.getElementById("txtEstCost"),
			"parts":document.getElementById("cbParts"),
			"comeback":document.getElementById("cbComeback"),
			"waiting":document.getElementById("cbWaiting")
			}],
			wrappers:[{
				"optionalWrapper": document.getElementById("cbWrapper"),
				"notesWrapper": document.getElementById("notesWrapper"),
				"cashWrapper" : document.getElementById("cashWrapper"),
				"costWrapper" : document.getElementById("costWrapper"),
				"partsWrapper" : document.getElementById("partsWrapper"),
				"comebackWrapper" : document.getElementById("comebackWrapper"),
				"waitingWrapper" : document.getElementById("waitingWrapper")
			}]
		});
		
	
	
	}
	var jobBucket = {
		frame : [],
		spring : [],
		alignment : [],
		kingpin : []
	};
	var closeTimer;
	var loc = "";
	var newStatus = "";
	var isOpen = false;
	var jc = "";
	var date = new Date();
	var day = date.getDate();
	var month = date.getMonth() + 1;
	var year = date.getFullYear();
	var today = month + "/" + day + "/" + year;
	var xmlVehicles = "";
	var ns = "";
	//alert(date.getTime());
	var eName="";
	var eCash="";
	var eUnit="";
	var eMake="";
	var eCost="";
	var eJobCat="";
	var eWaiting="";
	var eDate="";
	var eForm=document.getElementById("my-form");
	var vehicleToEdit="";
	var testCount=0;
	var frameCount=0;
	var springCount=0;
	var alignmentCount=0;
	var kingpinCount=0;
	var springBucket=["wfw0","wfw4","wfw8","wfw12","wfw16","wfw20","wfw24","wfw28","wfw32","wfw36","wfw40","wfw44"];
	var alignmentBucket=["wfw1","wfw5","wfw9","wfw13","wfw17","wfw21","wfw25","wfw29","wfw33","wfw37","wfw41","wfw45"];
	var kingpinBucket=["wfw2","wfw6","wfw10","wfw14","wfw18","wfw22","wfw26","wfw30","wfw34","wfw38","wfw42","wfw46"];
	var frameBucket=["wfw3","wfw7","wfw11","wfw15","wfw19","wfw23","wfw27","wfw31","wfw35","wfw39","wfw43","wfw47"];
	var testBucket=["wfw0"];
	var scheduleBucket=["sch0","sch1","sch2","sch3","sch4","sch5","sch6","sch7","sch8","sch9","sch10","sch11","sch12","sch13","sch14","sch15","sch16","sch17","sch18","sch19"];
	var largestBucket=0;
	var wfwTotalSlots=48;
	//alert(today);
	
	setInterval(function(){ 
		if(isOpen==false){
			refresh(); }}, 20000);
		
	
	function loadPage() {
		pullData();
		clearPage();
		/////fillPage();
		//readFile();
		countJobTypes();
		/////clearPage();
		fillBuckets();
		
		fillPage();
		//checkIfFull();
		//var r=vehicles.WPU.sort(function(a,b) { return parseFloat(a.dateComplete) - parseFloat(b.dateComplete) } );

	}
	function reloadPage() {
		pullData();
		clearPage();
		/////fillPage();
		//readFile();
		countJobTypes();
		/////clearPage();
		fillBuckets();
		
		fillPage();
		//checkIfFull();
		//var r=vehicles.WPU.sort(function(a,b) { return parseFloat(a.dateComplete) - parseFloat(b.dateComplete) } );

	}
	function countJobTypes(){
		frameCount=0;
		springCount=0;
		alignmentCount=0;
		kingpinCount=0;
		var blah = xmlDoc.getElementsByTagName("vehicle");
		//alert(xmlVehicles.length);
		
		for ( i = 0; i < blah.length; i++) {
			
			var b = blah[i].getAttribute("jobCat");
			var s = blah[i].getAttribute("status");
			if(s=="wfw"){
			switch(b){
				case "frame":
				
					frameCount++;
					break;
				case "spring":
					springCount++;
					break;
				case "alignment":
					alignmentCount++;
					break;	
				case "kingPin":
					kingpinCount++;
					break;
				default:
					break;
			}
			}
		}
		//alert("Frame jobs: "+frameCount+" Spring jobs: "+springCount+" Alignment: "+alignmentCount+" Kingpin: "+kingpinCount);
		
	}
	function fillBuckets(){
		var fbn=0;
		var sbn=0;
		var abn=0;
		var kbn=0;
		if(frameCount>11){
			fbn=48;
		for(i=12;i<frameCount;i++){
			
			frameBucket.push("wfw"+fbn);
			fbn+=4;
		}
		}
		if(springCount>12){
			sbn=49;
		for(i=12;i<springCount;i++){
			
			springBucket.push("wfw"+sbn);
			sbn+=4;
		}
		}
		if(alignmentCount>12){
			abn=50;
		for(i=12;i<alignmentCount;i++){
			
			alignmentBucket.push("wfw"+abn);
			abn+=4;
		}
		}
		if(kingpinCount>12){
			kbn=51;
		for(i=12;i<kingpinCount;i++){
			
			kingpinBucket.push("wfw"+kbn);
			kbn+=4;
		}
		}
		largestBucket=Math.max(frameCount,springCount,alignmentCount,kingpinCount);
		//alert("largest bucket "+largestBucket);
		if(largestBucket>11)
		{
			var ccc=largestBucket-12;
			//alert(ccc);
			wfwTotalSlots=largestBucket*4;
			addRowsToWFW(ccc);
		}
		//alert(frameBucket.length+" "+springBucket.length+" "+alignmentBucket.length+" "+kingpinBucket.length);
	}
	function addRowsToWFW(rta){
		var rowsToAdd=rta;
			var idCount=48;
		for(i=0;i<rowsToAdd;i++){
			for(j=0;j<4;j++){
			var nl=document.createElement("div");
			nl.setAttribute("class","job");
			nl.setAttribute("id","wfw"+idCount);
			idCount++;
			nl.setAttribute("ondrop","drop(event)");
			nl.setAttribute("ondragover","allowDrop(event)");
			document.getElementById("waiting").appendChild(nl);
		}
		}
		//alert("total wfw slots created: "+idCount);
		wfwTotalSlots=idCount;
	}

	function pullData() {
		xmlDoc.load('fs.xml');
		clearData();
		// TODO: validate true
		var xmlElem = xmlDoc.documentElement;
		// TODO: validate not null
		//var xmlStatus = xmlElem.selectSingleNode('//vehicle[@custName=\'City of Columbus\']');
		//var strStatus = xmlStatus.getAttribute('status');

		xmlVehicles = xmlDoc.getElementsByTagName("vehicle");
		//alert(xmlVehicles.length);
		for ( i = 0; i < xmlVehicles.length; i++) {
			var s = xmlVehicles[i].getAttribute("status");
			//alert(xmlVehicles.parent().children().index(this));
			
			switch(s) {
				case "wfw":
					vehicles.WFW.push({
						"custName" : xmlVehicles[i].getAttribute("custName"),
						"make" : xmlVehicles[i].getAttribute("make"),
						"estCost" : xmlVehicles[i].getAttribute("estCost"),
						"jobCat" : xmlVehicles[i].getAttribute("jobCat"),
						"dateIn" : xmlVehicles[i].getAttribute("dateIn"),
						"status" : xmlVehicles[i].getAttribute("status"),
						"unitNumber" : xmlVehicles[i].getAttribute("unitNumber"),
						"xmlPosition" : i,
						"cash" : xmlVehicles[i].getAttribute("cash"),
						"shopLocation" : xmlVehicles[i].getAttribute("shopLocation"),
						"waiting" : xmlVehicles[i].getAttribute("waiting"),
						"comeback" : xmlVehicles[i].getAttribute("comeback"),
						"parts" : xmlVehicles[i].getAttribute("parts")
						});
					//alert(i);

					break;
				case "wfp":
					vehicles.WFP.push({
						"custName" : xmlVehicles[i].getAttribute("custName"),
						"make" : xmlVehicles[i].getAttribute("make"),
						"estCost" : xmlVehicles[i].getAttribute("estCost"),
						"jobCat" : xmlVehicles[i].getAttribute("jobCat"),
						"dateIn" : xmlVehicles[i].getAttribute("dateIn"),
						"status" : xmlVehicles[i].getAttribute("status"),
						"unitNumber" : xmlVehicles[i].getAttribute("unitNumber"),
						"xmlPosition" : i,
						"cash" : xmlVehicles[i].getAttribute("cash"),
						"waiting" : xmlVehicles[i].getAttribute("waiting"),
						"comeback" : xmlVehicles[i].getAttribute("comeback"),
						"parts" : xmlVehicles[i].getAttribute("parts")
					});
					//alert(vehicles.WFP[i].xmlPosition);
					break;
				case "wip":
					vehicles.WIP.push({
						"custName" : xmlVehicles[i].getAttribute("custName"),
						"make" : xmlVehicles[i].getAttribute("make"),
						"estCost" : xmlVehicles[i].getAttribute("estCost"),
						"jobCat" : xmlVehicles[i].getAttribute("jobCat"),
						"dateIn" : xmlVehicles[i].getAttribute("dateIn"),
						"status" : xmlVehicles[i].getAttribute("status"),
						"unitNumber" : xmlVehicles[i].getAttribute("unitNumber"),
						"xmlPosition" : i,
						"shopLocation" : xmlVehicles[i].getAttribute("shopLocation"),
						"cash" : xmlVehicles[i].getAttribute("cash"),
						"waiting" : xmlVehicles[i].getAttribute("waiting"),
						"comeback" : xmlVehicles[i].getAttribute("comeback"),
						"parts" : xmlVehicles[i].getAttribute("parts")
					});
					//alert(vehicles.WIP[i].xmlPosition);
					break;
				case "wpu":
					vehicles.WPU.push({
						"custName" : xmlVehicles[i].getAttribute("custName"),
						"make" : xmlVehicles[i].getAttribute("make"),
						"estCost" : xmlVehicles[i].getAttribute("estCost"),
						"jobCat" : xmlVehicles[i].getAttribute("jobCat"),
						"dateIn" : xmlVehicles[i].getAttribute("dateIn"),
						"status" : xmlVehicles[i].getAttribute("status"),
						"unitNumber" : xmlVehicles[i].getAttribute("unitNumber"),
						"xmlPosition" : i,
						"shopLocation" : xmlVehicles[i].getAttribute("shopLocation"),
						"cash" : xmlVehicles[i].getAttribute("cash"),
						"waiting" : xmlVehicles[i].getAttribute("waiting"),
						"dateComplete" : xmlVehicles[i].getAttribute("dateComplete"),
						"comeback" : xmlVehicles[i].getAttribute("comeback"),
						"parts" : xmlVehicles[i].getAttribute("parts")
					});

					break;
					case "sch":
					vehicles.SCH.push({
						"custName" : xmlVehicles[i].getAttribute("custName"),
						"make" : xmlVehicles[i].getAttribute("make"),
						"estCost" : xmlVehicles[i].getAttribute("estCost"),
						"jobCat" : xmlVehicles[i].getAttribute("jobCat"),
						"dateIn" : xmlVehicles[i].getAttribute("dateIn"),
						"status" : xmlVehicles[i].getAttribute("status"),
						"unitNumber" : xmlVehicles[i].getAttribute("unitNumber"),
						"xmlPosition" : i,
						"shopLocation" : xmlVehicles[i].getAttribute("shopLocation"),
						"cash" : xmlVehicles[i].getAttribute("cash"),
						"waiting" : xmlVehicles[i].getAttribute("waiting"),
						"comeback" : xmlVehicles[i].getAttribute("comeback"),
						"parts" : xmlVehicles[i].getAttribute("parts")
					});
					//alert(vehicles.WIP[i].xmlPosition);
					break;
					case "pos":
					vehicles.POS.push({
						"custName" : xmlVehicles[i].getAttribute("custName"),
						"make" : xmlVehicles[i].getAttribute("make"),
						"estCost" : xmlVehicles[i].getAttribute("estCost"),
						"jobCat" : xmlVehicles[i].getAttribute("jobCat"),
						"dateIn" : xmlVehicles[i].getAttribute("dateIn"),
						"status" : xmlVehicles[i].getAttribute("status"),
						"unitNumber" : xmlVehicles[i].getAttribute("unitNumber"),
						"xmlPosition" : i,
						"shopLocation" : xmlVehicles[i].getAttribute("shopLocation"),
						"cash" : xmlVehicles[i].getAttribute("cash"),
						"waiting" : xmlVehicles[i].getAttribute("waiting"),
						"comeback" : xmlVehicles[i].getAttribute("comeback"),
						"parts" : xmlVehicles[i].getAttribute("parts")
					});
					
					//alert(vehicles.WIP[i].xmlPosition);
					break;
					case "npu":
					vehicles.NPU.push({
						"custName" : xmlVehicles[i].getAttribute("custName"),
						"make" : xmlVehicles[i].getAttribute("make"),
						"estCost" : xmlVehicles[i].getAttribute("estCost"),
						"jobCat" : xmlVehicles[i].getAttribute("jobCat"),
						"dateIn" : xmlVehicles[i].getAttribute("dateIn"),
						"status" : xmlVehicles[i].getAttribute("status"),
						"unitNumber" : xmlVehicles[i].getAttribute("unitNumber"),
						"xmlPosition" : i,
						"shopLocation" : xmlVehicles[i].getAttribute("shopLocation"),
						"cash" : xmlVehicles[i].getAttribute("cash"),
						"waiting" : xmlVehicles[i].getAttribute("waiting"),
						"comeback" : xmlVehicles[i].getAttribute("comeback"),
						"parts" : xmlVehicles[i].getAttribute("parts")
					});
					//alert(vehicles.WIP[i].xmlPosition);
					break;
				default:
					break;
			}

		}
		vehicles.WPU.sort(dynamicSort("dateComplete"));
		for(i=0;i<vehicles.WPU.length;i++){
			//alert(vehicles.WPU[i].dateComplete);
		}
	}
	
function dynamicSort(property) {
    var sortOrder = 1;
    if(property[0] === "-") {
        sortOrder = -1;
        property = property.substr(1);
    }
    return function (a,b) {
        var result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;
        return result * sortOrder;
    };
}

function sortJsonArrayByProperty(objArray, prop, direction){
    if (arguments.length<2) throw new Error("sortJsonArrayByProp requires 2 arguments");
    var direct = arguments.length>2 ? arguments[2] : 1; //Default to ascending

    if (objArray && objArray.constructor===Array){
        var propPath = (prop.constructor===Array) ? prop : prop.split(".");
        objArray.sort(function(a,b){
            for (var p in propPath){
                if (a[propPath[p]] && b[propPath[p]]){
                    a = a[propPath[p]];
                    b = b[propPath[p]];
                }
            }
            // convert numeric strings to integers
            a = a.match(/^\d+$/) ? +a : a;
            b = b.match(/^\d+$/) ? +b : b;
            return ( (a < b) ? -1*direct : ((a > b) ? 1*direct : 0) );
        });
    }
}


	function fillPage() {
		//clearPage();
		pullData();
		fillWFW();
		fillWIP();
		//fillWFP();
		fillWPU();
		fillSCH();
		fillPOS();
		fillNPU();
		document.getElementById('ALLcount').innerHTML = vehicles.WFW.length+vehicles.WFP.length+vehicles.WIP.length;
		document.getElementById('WFWcount').innerHTML = vehicles.WFW.length;
		//document.getElementById('bigWFPcountBox').innerHTML = vehicles.WFP.length;
		document.getElementById('bigWPUcountBox').innerHTML = vehicles.WPU.length;
		document.getElementById('bigSCHcountBox').innerHTML = vehicles.SCH.length;
		document.getElementById('bigPOScountBox').innerHTML = vehicles.POS.length;
		document.getElementById('bigNPUcountBox').innerHTML = vehicles.NPU.length;
		countWPUCashTotal();
					
	}
	function countWPUCashTotal(){
		var amount=0;
		for (i=0;i<vehicles.WPU.length;i++){
			if(vehicles.WPU[i].estCost && vehicles.WPU[i].cash=="-1"){
				amount+=Number(vehicles.WPU[i].estCost);
			}
		}
		document.getElementById("wpuCashTotal").innerHTML = "$"+amount;
	}
	function clearPage(){
		clearWFW();
		clearWIP();
		//clearWFP();
		clearWPU();
	}
	function clearData(){
		for ( i = vehicles.WFW.length; i > 0; i--) {
				vehicles.WFW.pop();
				//alert(vehicles.WFW.length);
			}
			for ( i = vehicles.WIP.length; i > 0; i--) {
				vehicles.WIP.pop();
				//alert(vehicles.WFW.length);
			}
			for ( i = vehicles.WFP.length; i > 0; i--) {
				vehicles.WFP.pop();
				//alert(vehicles.WFW.length);
			}
			for ( i = vehicles.WPU.length; i > 0; i--) {
				vehicles.WPU.pop();
				//alert(vehicles.WFW.length);
			}
	}

	/*
	 alert("WFW is "+vehicles.WFW.length);
	 alert("WFP is "+vehicles.WFP.length);
	 alert("WIP is "+vehicles.WIP.length);
	 alert("WPU is "+vehicles.WPU.length);
	 */
	/*for(i=0;i<vehicles.WFW.length;i++){
	 alert(vehicles.WFW[i].custName);
	 }
	 */
	function val() {
		alert("val stinks");
	}

	function allowDrop(ev) {
		ev.preventDefault();
		ev.stopPropagation();
	}

	function drag(ev) {
		pullData();
		ev.dataTransfer.setData("Text", ev.target.id);
		//ev.dataTransfer.setData("Text", this.id);
		//alert(ev.currentTarget.id);
		var l = ev.currentTarget.id;
		loc = l.substr(4, 2);
		//alert("drag"+loc);
	}

	function drop(ev) {
		
		ns = ev.target.id;
		newStatus = ns.substr(0, 3);
		//alert("drop"+newStatus);
		//setNewLocation();
		//loadPage();
		ev.stopPropagation();
		ev.preventDefault();
		//var data=ev.dataTransfer.getData("Text");
		pullData();
		//alert(ns);
		if (ev.target.hasChildNodes()) {
			//alert("has kids");
			switch(ev.target.id) {
				case "wfpHeader":
					//alert("wfp");
					xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("status", "wfp");
					xmlDoc.save("fs.xml");
					break;
				case "WFP":
					//alert("wfp");
					xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("status", "wfp");
					xmlDoc.save("fs.xml");
					break;
				
				case "WPU":
					//alert("wfp");
					checkIfFull();
					var d = new Date();
					//alert(d);
					xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("status", "wpu");
					xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("dateComplete", d.getTime() );
					xmlDoc.save("fs.xml");
					break;
				default:
				//alert(ev.target.id);
					break;
			}

		} else {
			//xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("shopLocation",ev.target.id);
					
			try {
				if(ev.target.className !== "jobCat"){
				setNewLocation();
				var data = ev.dataTransfer.getData("Text");
				ev.target.appendChild(document.getElementById(data));
				if(newStatus == "wpu"){
					var d = new Date();
					
					//alert(d.getTime());
					xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("status", "wpu");
					xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("dateComplete", d.getTime() );
					xmlDoc.save("fs.xml");
				}
				
				}
				//alert(ev.target.id);

			} catch(e) {
			}
		}
		clearPage();
		reloadPage();
		//pullData();
		//loadPage();
		//alert("page filled");
		//alert(ev.currentTarget.id);
		//alert(xmlVehicles.length);
	}

	function deleteDrop(ev) {
		//drop(ev);
		try{
		var deleteMe = xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc];
		xmlDoc.getElementsByTagName("workflow")[0].removeChild(deleteMe);
		xmlDoc.save("fs.xml");
		//ev.parentNode.removeChild(ev);
		clearPage();
		reloadPage();
		}catch(e){logError(e);}
	}
function logError(e) {
		try {

			var fso, s;
			fso = new ActiveXObject("Scripting.FileSystemObject");

			s = fso.OpenTextFile("errorLog.txt", 8, 1, 0);
			s.write(e.stack + '\n');
			s.Close();
		} catch(err) {
			var strErr = 'Error:';
			strErr += '\nNumber:' + err.number;
			strErr += '\nDescription:' + err.description;
			document.write(strErr);
			alert(strErr);
		}
	}
	function WriteToFile() {
		try {

			var fso, s;
			fso = new ActiveXObject("Scripting.FileSystemObject");

			s = fso.OpenTextFile("test.txt", 2, 1, -2);
			s.writeline(document.getElementById("notesArea").value);
			s.Close();
		} catch(err) {
			var strErr = 'Error:';
			strErr += '\nNumber:' + err.number;
			strErr += '\nDescription:' + err.description;
			document.write(strErr);
			alert(strErr);
		}
	}

	function readFile(filename) {
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var ForReading = 1;
		var f1 = fso.OpenTextFile("test.txt", 1);
		var text = f1.ReadAll();
		document.getElementById("notesArea").innerHTML = text;
		f1.close();
		return text;
	}
	function openBox(e){
		switch(e.id){
			case "WPU":
				document.getElementById("wpuBox").style.display = "block";
				break;
			case "WFP":
				document.getElementById("wfpBox").style.display = "block";
				break;
			case "SCH":
				document.getElementById("schBox").style.display = "block";
				break;
			case "POS":
				document.getElementById("posBox").style.display = "block";
				break;
			case "NPU":
				document.getElementById("npuBox").style.display = "block";
				break;
			default:
			break;
		}
		
	}
	function closeBox(ev,e){
		switch(e.parentNode.id){
			case "wpuBoxHeader":
				document.getElementById("wpuBox").style.display = "none";
				break;
			case "wfpBoxHeader":
				document.getElementById("wfpBox").style.display = "none";
				break;
			case "schBoxHeader":
				document.getElementById("schBox").style.display = "none";
				break;
			case "posBoxHeader":
				document.getElementById("posBox").style.display = "none";
				break;
			case "npuBoxHeader":
				document.getElementById("npuBox").style.display = "none";
				break;
				default:
				break;
		}
		
		//alert("close");
		ev.cancelBubble=true;
	}
	function openInput(e,active,inputID1,inputID2){
		var v=active.value;
		//alert(e.keyCode);
		var next=document.getElementById(inputID1);
		//alert(v);
		//alert(active.parentNode.className);
		if(active.id=="cbCash"){
			//alert('b');
			if(active.checked==true){
				document.getElementById(inputID1).className="visibleInput";
				}
				else{
				
					document.getElementById('txtCost').value="";
					document.getElementById(inputID1).className="hiddenInput";
					//alert(document.getElementById(inputID1).value);
				}
		}
		else{
			if(e.keyCode!=9){
		if(v && v!=""){
			//alert(k);
		document.getElementById(inputID1).className="visibleInput";
		next.style.display="block";
		//alert("make "+inputID1+ " visible "+document.getElementById(inputID1).style.display);
		}else{
			//alert("hide input");
			document.getElementById(inputID1).className="hiddenInput"}
		}
		if(inputID2){
			document.getElementById(inputID2).style.display="block"
		document.getElementById(inputID2).className="visibleFieldset";
		}
		}
	}
	function initializeForm(){		
			
		document.getElementById("jobTypeWrapper").style.display="none";
		document.getElementById("originWrapper").style.display="block";
		document.getElementById("customerNameWrapper").style.display="none";
		document.getElementById("unitWrapper").style.display="none";
		document.getElementById("notesWrapper").style.display="none";
		document.getElementById("cbWrapper").style.display="none";
		
		
	}
	function addNewJob(){
		document.getElementById("addBlock").style.display="block";
		document.getElementById("selOrigin").focus();
		//close bottom boxes if open
		document.getElementById("schBox").style.display="none";
		document.getElementById("posBox").style.display="none";
		document.getElementById("npuBox").style.display="none";
	}
	function cancelAdd(){
		document.getElementById("frmReset").click();
		document.getElementById("addBlock").style.display="none";
		initializeForm();
		getFormInputs();
		
	}
	function submitted(){
		addNewVehicle();
		clearPage();
		fillPage();
		document.getElementById("addBlock").style.display="none";
		
		//getFormInputs();
		//var requiredInfo=formInputs.required[0].inputs[0];
		//alert(t.unit.value);
		initializeForm();
		document.getElementById("frmReset").click();
	}
	function clearFormInputs(){
		getFormInputs();
		document.getElementById("addBlock").style.display="none";
		var requiredInfo=formInputs.required[0].inputs[0];
		requiredInfo.unit.value="";
		requiredInfo.customerName.value="";
	}
	//WriteToFile();
</script>
<body onload="loadPage()">
	<div id="main">
		<!--
		<div id="menuBar">
			
			<div class="newJobButton" id="spring" onclick="openAddBox(this)">Spring</div>
			<div class="newJobButton" id="alignment" onclick="openAddBox(this)">Alignment</div>
			<div class="newJobButton" id="kingPin" onclick="openAddBox(this)">King Pin</div>
			<div class="newJobButton" id="frame" onclick="openAddBox(this)">Frame</div>
			
		</div>
		-->
		<div id="add" class="add">
			<div id="formHeader" class="mainHeader"><img src="arrow2.png"/> Workflow <img src="arrow.png"/>
				<div id="trashButton" ondragover="allowDrop(event)" ondrop="deleteDrop(event)"><img src="trashCan.jpg"/></div>

				<div id="addNewJob" onclick="addNewJob()">Add New</div>
				
			</div>

			<form id="my-form" onSubmit="processForm(this)">
				
			</form>
		</div>
		<div id="legend">
			<span style="background-color:orange; color:white; width:15px; height:15px;">Check All</span>
			<span style="background-color:blue; color:white; width:15px; height:15px;">Spring</span>
			<span style="background-color:purple; color:white; width:15px; height:15px;">Alignment</span>
			<span style="background-color:green; color:white; width:15px; height:15px;">King Pin</span>
			<span style="background-color:red; color:white; width:15px; height:15px;">Frame</span>
			
			<img src="dollarSignLegend.jpg"/> = Cash Customer&nbsp;
			<img src="waitingLegend.jpg"/> = Customer waiting &nbsp;
			<b style='font-size:13px;color:#A3A3C2;text-decoration:line-through'>CUSTOMER NAME</b> = Parts or Approval needed &nbsp;
			<img src="warningLegend.png"/> = Comeback
			<span id="admin">
			<FORM NAME="Form1">
				<INPUT TYPE="Button" NAME="Button1" VALUE="Back Up" onclick="callBackup()">

				<INPUT TYPE="Button" NAME="Button2" VALUE="Restore" onclick="callRestore()">
			</FORM>
			</span>
		</div>
		
	<div id="addBlock">
		<div class="header">Add New<div class="closeButton" onclick="cancelAdd()"><img src="close.jpg"></div></div>
		<form id="addBlockForm" onsubmit="alert('hi')">
			<fieldset class="visibleFieldset"id="h"> 
				<legend>Required Job Info</legend>
				<span class="visibleInput" id="originWrapper">
				<label for="selOrigin">What is the job status?</label>
					<select id="selOrigin" tabindex="1" onchange="openInput(event,this,'jobTypeWrapper')">
						<option value="None"></option>
  						<option value="On the Lot">On the Lot</option>
  						<option value="Call:Scheduled">Call:Scheduled</option>
  						<option value="Call:Possible">Call:Possible</option>
  						<option value="Needs Picked Up">Needs Picked Up</option>
  						
					</select>
				</span>
				<span class="hiddenInput" id="jobTypeWrapper">What is the job type?
					<select id="selJobType" tabindex="2" onchange="openInput(event,this,'customerNameWrapper')">
						<option value="None"></option>
  						<option value="Spring">Spring</option>
  						<option value="Alignment">Alignment</option>
  						<option value="Frame">Frame</option>
  						<option value="King Pin">King Pin</option>
  						<option value="Check All">Check All</option>
					</select>
				</span>
			
			<span class="hiddenInput" id="customerNameWrapper">What is the customer's name? <input id="txtCustomerName" tabindex="3" onkeyup="openInput(event,this,'unitWrapper')" type="text"/></span>
			<span class="hiddenInput" id="unitWrapper">What is the unit#? <input id="txtUnit" tabindex="4" onkeyup= "openInput(event,this,'cbWrapper','notesWrapper')" type="text"/></span>
		</fieldset>
	
			<span class="hiddenInput" id="notesWrapper">Notes: <textarea id="txtNotes" rows="5" tabindex="5" type="text" style="vertical-align:middle;"></textarea></span>
			
			<div class="hiddenInput" id="cbWrapper">
				
			
			
				<fieldset class="visibleFieldset"id="h"> 
				<legend>Optional Job Info: Check all that apply</legend>
					<span class="visibleInput">Cash customer: <input type="checkbox" id="cbCash" tabindex="6" onchange="openInput(event,this,'est')"/></span>
					<div id="est" class="hiddenInput">Estimated cost:<input id="txtCost" type="text" tabindex="7"/></div>
					<span class="visibleInput">Parts or Approval needed: <input id="cbParts" type="checkbox" tabindex="8"/></span>
					<span class="visibleInput">Comeback:  <input id="cbComeback"type="checkbox" tabindex="9"/></span>
					<span class="visibleInput">Waiting:  <input id="cbWaiting" type="checkbox" tabindex="10"/></span>
			
			
			
			</fieldset>
			<span id="formButtons" class="visibleInput">
				<input id="frmCancel" type="button" tabindex="13" value="Cancel" onclick="cancelAdd()"/>
				<input id="frmReset" type="reset" tabindex="14" value="Reset"/>
				<input id="frmSubmit" type="button" tabindex="12" value="Add Job"onclick="submitted()"/>
			</span>
			</div>
		</form>
	</div>
	<div id="left">
		<div id="waiting" class="cat">
			<div class="header" id="wfwHeader">
				On the Lot
			</div>

			<div class="job" id="wfw0" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw9" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw10" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw11" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw12" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw13" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw14" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw15" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw16" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw17" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw18" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw19" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw20" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw21" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw22" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw23" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw24" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw25" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw26" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw27" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw28" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw29" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw30" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw31" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw32" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw33" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw34" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw35" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw36" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw37" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw38" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw39" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw40" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw41" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw42" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw43" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw44" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw45" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw46" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw47" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
		<!--<div class="job" id="wfw48" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw49" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="job" id="wfw50" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
		-->
		</div>

	</div>
	<div id="middle">
		<div id="wip" class="cat">
			<div class="header">
				In the Shop
			</div>
			<div class="headerShop">
				Back Shop
			</div>
			<div id="wip0" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div id="wip1" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="headerShop">
				Alignment
			</div>
			<div id="wip2" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div id="wip3" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="headerShop">
				Frame
			</div>
			<div id="wip4" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div id="wip5" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="headerShop">
				Pit 2
			</div>
			<div id="wip6" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div id="wip7" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="headerShop">
				Pit 1
			</div>
			<div id="wip8" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div id="wip9" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div class="headerShop">
				Floor
			</div>
			<div id="wip10" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			<div id="wip11" class="job" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			
			<!--
			<div id="notesHeader" class="header">
				Notes
				<div id="saveNotes" onclick="WriteToFile()">
					save notes
				</div>
			</div>
			
			<textarea id="notesArea"></textarea>
			-->
		</div>
	</div>
	<div id="right">
		<div class="cat" id="refresh" onclick="refresh()">
			Refresh
		</div>
		<!--
		<div id="WFP" class="cat" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="openBox(this)">
			WFP/<br/>
			Approval
			<div id="bigWFPcountBox" class="bigCount">2</div>
			<div id="wfpBox" class="waitingForParts">
				<div id="wfpBoxHeader" class="header">
					WFP<div class="closeButton" onclick="closeBox(event,this)"><img src="close.jpg"></div>
				</div>
				<div class="job" id="wfp0" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp9" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp10" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp11" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp12" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp13" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp14" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp15" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp16" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp17" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp18" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wfp19" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			
			</div>
		</div>
		-->
		<div id="WPU" class="cat" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="openBox(this)">
			Job	Complete
			
			<div id="bigWPUcountBox" class="bigCount">2</div>
			<div id="wpuCashTotal" class="wpuCashTotal"></div>
			<div id="wpuBox" class="waitingForParts">
				<div id="wpuBoxHeader" class="header">
					
					Job Complete<div class="closeButton" onclick="closeBox(event,this)"><img src="close.jpg"></div>
				</div>
				<div class="job" id="wpu0" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu9" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu10" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu11" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu12" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu13" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu14" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu15" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu16" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu17" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu18" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="wpu19" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			
			</div>
		</div>
		<div class="cat" id="counts">
			<div class="countBox">
				<span class="header">Total</span>
				<span class="count" id="ALLcount"></span>
			</div>
			<div class="countBox">
				<span class="header">On Lot</span>
				<span class="count" id="WFWcount"></span>
			</div>
			<img src="logo3.jpg">
		</div>
		
	</div>
	<div id="bottom">
		
		<div id="SCH" class="bottomBox" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="openBox(this)">
			<div class="header">Call:Scheduled</div>
			<div id="bigSCHcountBox" class="bigCount">2</div>
			<div id="schBox" class="bottomBoxOpen">
				<div id="schBoxHeader" class="header">
					Call:Scheduled<div class="closeButton" onclick="closeBox(event,this)"><img src="close.jpg"></div>
				</div>
				<div class="job" id="sch0" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch9" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch10" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch11" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch12" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch13" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch14" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch15" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch16" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch17" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch18" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="sch19" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			
			</div>
		</div>
		<div id="POS" class="bottomBox" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="openBox(this)">
			<div class="header">Call:Possible</div>
			<div id="bigPOScountBox" class="bigCount">2</div>
			<div id="posBox" class="bottomBoxOpen">
				<div id="posBoxHeader" class="header">
					Call:Possible<div class="closeButton" onclick="closeBox(event,this)"><img src="close.jpg"></div>
				</div>
				<div class="job" id="pos0" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos9" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos10" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos11" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos12" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos13" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos14" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos15" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos16" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos17" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos18" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="pos19" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			
			</div>
		</div>
		<div id="NPU" class="bottomBox" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="openBox(this)">
			<div class="header">Needs Picked Up</div>
			<div id="bigNPUcountBox" class="bigCount">2</div>
			<div id="npuBox" class="bottomBoxOpen">
				<div id="npuBoxHeader" class="header">
					Needs Picked Up<div class="closeButton" onclick="closeBox(event,this)"><img src="close.jpg"></div>
				</div>
				<div class="job" id="npu0" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu2" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu3" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu4" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu5" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu9" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu10" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu11" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu12" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu13" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu14" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu15" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu16" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu17" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu18" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
				<div class="job" id="npu19" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
			
			</div>
		</div>
	</div>
	<script>
		function fillWFP() {
			
			for ( i = 0; i < vehicles.WFP.length; i++) {
				
				document.getElementById('wfp' + i).innerHTML = "<div onclick='getEditVehicle(this)' class='vehicle' id='drag" + vehicles.WFP[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfp" + i + "'></span><span class='info' id='wfp" + i + "info'></span><span class='jobCat' id='wfp" + i + "Cat'>&nbsp;</span></div>";
				//alert(vehicles.WFW[i].xmlPostion);
				
				if (vehicles.WFP[i].cash == "-1") {
					document.getElementById('wfp' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg)";
					document.getElementById('wfp' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WFP[i].custName +"</b><br/> #" + vehicles.WFP[i].unitNumber + " <span class='money'><b>$"+vehicles.WFP[i].estCost+"</b></span><br/>" + vehicles.WFP[i].make;
				
				}
				if(vehicles.WFP[i].waiting == "-1"){
					document.getElementById('wfp' + i + 'info').style.backgroundImage = "url(waiting.jpg)";
				
				}
				if (vehicles.WFP[i].cash == "-1" && vehicles.WFP[i].waiting == "-1") {
					document.getElementById('wfp' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg), url(waiting.jpg)";
				}
				if(vehicles.WFP[i].comeback == "-1"){
					document.getElementById('wfp' + i + 'info').style.backgroundImage = "url(warningLegend.png)";
					document.getElementById('wfp' + i + 'info').style.backgroundPosition = "right top";
				}
				if(vehicles.WFP[i].comeback == "-1" && vehicles.WFP[i].cash == "-1"){
					document.getElementById('wfp' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg)";
					document.getElementById('wfp' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.WFP[i].comeback == "-1" && vehicles.WFP[i].waiting == "-1"){
					document.getElementById('wfp' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(waiting.jpg)";
					document.getElementById('wfp' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.WFP[i].comeback == "-1" && vehicles.WFP[i].cash == "-1" && vehicles.WFP[i].waiting == "-1"){
					document.getElementById('wfp' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg), url(waiting2.jpg)";
					document.getElementById('wfp' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				}
				if(vehicles.WFP[i].parts=="-1"){
				document.getElementById('wfp' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;text-decoration:line-through;color:#A3A3C2'>"+vehicles.WFP[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WFP[i].unitNumber + " <span class='money'><b>$"+vehicles.WFP[i].estCost+"</b></span><br/>" + vehicles.WFP[i].make;
					
				}
				else{

				document.getElementById('wfp' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WFP[i].custName.toUpperCase() + "</b><br/> #" + vehicles.WFP[i].unitNumber + "<br/>" + vehicles.WFP[i].make;
				}
				document.getElementById('ttWfp' + i).innerHTML = vehicles.WFP[i].dateIn + "<br/> " + vehicles.WFP[i].custName.toUpperCase() + " #" + vehicles.WFP[i].unitNumber + "<br/>" + vehicles.WFP[i].make + "<br/>Est Cost:$" + vehicles.WFP[i].estCost;

				var jobType = vehicles.WFP[i].jobCat;
				switch(jobType) {
					case "frame":
					case "Frame":
						document.getElementById('wfp' + i + 'Cat').style.backgroundColor = "red";
						break;
					case "spring":
					case "Spring":
						document.getElementById('wfp' + i + 'Cat').style.backgroundColor = "blue";
						break;
					case "alignment":
					case "Alignment":
						document.getElementById('wfp' + i + 'Cat').style.backgroundColor = "purple";
						break;
					case "kingPin":
					case "King Pin":
						document.getElementById('wfp' + i + 'Cat').style.backgroundColor = "green";
						break;
					case "Check All":
					
						document.getElementById('wfp' + i + 'Cat').style.backgroundColor = "orange";
						break;
					default:
						break;
				}

			}
		}

		function test(el) {
			document.getElementById(el.id).innerHTML = "<form id='testETT' name='myGame'><input name='nameTT' id='nameTT' type=text value='" + vehicles.WFW[i].custName + "'></form>";
		}

		function fillWPU() {
			//alert(vehicles.WPU.length);
			
			try{
				//checkIfFull();
			for ( i = 0; i < vehicles.WPU.length; i++) {
				
				if(document.getElementById('wpu' + i)){
					//alert(i);
					document.getElementById('wpu' + i).innerHTML = "<div onclick='getEditVehicle(this)' class='vehicle' id='drag" + vehicles.WPU[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWpu" + i + "'></span><span class='info' id='wpu" + i + "info'></span><span class='jobCat' id='wpu" + i + "Cat'></span></div>";
					//alert(vehicles.WFW[i].xmlPostion);
					if (vehicles.WPU[i].cash == "-1") {
						//alert(vehicles.WPU[i].custName);
						document.getElementById('wpu' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg)";
						document.getElementById('wpu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WPU[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WPU[i].unitNumber + " <span class='money'><b>$" +vehicles.WPU[i].estCost+ "</b></span><br/>" + vehicles.WPU[i].make;
				
					}
					if(vehicles.WPU[i].waiting == "-1"){
						document.getElementById('wpu' + i + 'info').style.backgroundImage = "url(waiting.jpg)";
				
					}
					if (vehicles.WPU[i].cash == "-1" && vehicles.WPU[i].waiting == "-1") {
						document.getElementById('wpu' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg), url(waiting.jpg)";
					}
					if(vehicles.WPU[i].comeback == "-1"){
						document.getElementById('wpu' + i + 'info').style.backgroundImage = "url(warningLegend.png)";
						document.getElementById('wpu' + i + 'info').style.backgroundPosition = "right top";
					}
					if(vehicles.WPU[i].comeback == "-1" && vehicles.WPU[i].cash == "-1"){
						document.getElementById('wpu' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg)";
						document.getElementById('wpu' + i + 'info').style.backgroundPosition = "right top, left top";
					}
					if(vehicles.WPU[i].comeback == "-1" && vehicles.WPU[i].waiting == "-1"){
						document.getElementById('wpu' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(waiting.jpg)";
						document.getElementById('wpu' + i + 'info').style.backgroundPosition = "right top, left top";
					}
					if(vehicles.WPU[i].comeback == "-1" && vehicles.WPU[i].cash == "-1" && vehicles.WPU[i].waiting == "-1"){
						document.getElementById('wpu' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg), url(waiting2.jpg)";
						document.getElementById('wpu' + i + 'info').style.backgroundPosition = "right top, left top, left top";
					}
					if(vehicles.WPU[i].parts=="-1"){
						document.getElementById('wpu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through;'>"+vehicles.WPU[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WPU[i].unitNumber + " <br/>" + vehicles.WPU[i].make;
					
				
						if(vehicles.WPU[i].parts=="-1" && vehicles.WPU[i].cash == "-1" && vehicles.WPU[i].estCost != ""){
							document.getElementById('wpu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through;'>"+vehicles.WPU[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WPU[i].unitNumber + " <span class='money'><b>$"+vehicles.WPU[i].estCost+"</b></span><br/>" + vehicles.WPU[i].make;	
						}
					}
				else{
					if (vehicles.WPU[i].cash == "-1" && vehicles.WPU[i].estCost != "") {
						document.getElementById('wpu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WPU[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WPU[i].unitNumber + " <span class='money'><b>$" +vehicles.WPU[i].estCost+ "</b></span><br/>" + vehicles.WPU[i].make;
				
					}
					else{
					document.getElementById('wpu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WPU[i].custName.toUpperCase() + "</b><br/> #" + vehicles.WPU[i].unitNumber + "<br/>" + vehicles.WPU[i].make;
					}	
						
				}
				
				document.getElementById('ttWpu' + i).innerHTML = vehicles.WPU[i].dateIn + "<br/> " + vehicles.WPU[i].custName.toUpperCase() + " #" + vehicles.WPU[i].unitNumber + "<br/>" + vehicles.WPU[i].make + "<br/>Est Cost:$" + vehicles.WPU[i].estCost;
						
				var jobType = vehicles.WPU[i].jobCat;
				switch(jobType) {
					case "frame":
					case "Frame":
						document.getElementById('wpu' + i + 'Cat').style.backgroundColor = "red";
						break;
					case "spring":
					case "Spring":
						document.getElementById('wpu' + i + 'Cat').style.backgroundColor = "blue";
						break;
					case "alignment":
					case "Alignment":
						document.getElementById('wpu' + i + 'Cat').style.backgroundColor = "purple";
						break;
					case "kingPin":
					case "King Pin":
						document.getElementById('wpu' + i + 'Cat').style.backgroundColor = "green";
						break;
					case "Check All":
					
						document.getElementById('wpu' + i + 'Cat').style.backgroundColor = "orange";
						break;
					default:
						break;
				}
				
				}
			}
			}catch(e){logError(e);}
			
		}
		function isOdd(x) {
  return x%2 != 0;
}

		function fillWFW() {
			//alert(vehicles.WFW.length);
			testCount = testCount+1;
			var jobcategory="";
			for ( i = 0; i < vehicles.WFW.length; i++) {
				var jobcategory=vehicles.WFW[i].jobCat;
				try{
				if (vehicles.WFW[i].shopLocation !== 'new') {
					//alert(vehicles.WFW[i].shopLocation);
					document.getElementById(vehicles.WFW[i].shopLocation).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>not new</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
					
				} else {
					//alert("it was undefined");
					var j = 0;
					//alert(document.getElementById('wfw'+j).hasChildNodes());
					switch(jobcategory){
						case "Frame":
						case "frame":
						while (document.getElementById(frameBucket[j]).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						//alert(j);
							j++;
							}
							//alert(frameBucket[j]);
						document.getElementById(frameBucket[j]).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>test</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
						//xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("shopLocation",document.getElementById(frameBucket[j]));
						//xmlDoc.save("fs.xml");
						break;
						case "Spring":
						case "spring":
						while (document.getElementById(springBucket[j]).hasChildNodes()) {//'wfw' + j
						
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						//alert(j);
							j++;
							}
							document.getElementById(springBucket[j]).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>Spring</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
						//xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("shopLocation",document.getElementById(springBucket[j]));
						//xmlDoc.save("fs.xml");
						
						break;
						case "Alignment":
						case "alignment":
						while (document.getElementById(alignmentBucket[j]).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						//alert(j);
							j++;
							}
							document.getElementById(alignmentBucket[j]).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>Alignment</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
						break;
						case "King Pin":
						case "kingPin":
						while (document.getElementById(kingpinBucket[j]).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						//alert(j);
							j++;
							}
							document.getElementById(kingpinBucket[j]).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>Kingpin</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
						break;
						case "Check All":
						while (document.getElementById(frameBucket[j]).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						//alert(j);
							j++;
							}
							//alert(frameBucket[j]);
						document.getElementById(frameBucket[j]).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>test</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
						//xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("shopLocation",document.getElementById(frameBucket[j]));
						//xmlDoc.save("fs.xml");
						break;
						default:
						alert("error assigning job category");
						break;
					}
				
					/*
					while (document.getElementById(frameBucket[j]).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						j++;
					}
				
					document.getElementById(frameBucket[j]).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>Content 1</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
*/
					//document.getElementById('wfw'+i).innerHTML="<div class='vehicle' id='drag"+vehicles.WFW[i].xmlPosition+"' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw"+i+"'>Content 1</span><span class='info' id='j"+i+"info'></span><span class='jobCat' id='j"+i+"Cat'></span></div>";
				}//alert(vehicles.WFW[i].xmlPostion);
		}catch(e){ logError(e);
			//alert(document.getElementById('wfw'+j).id);
			//alert("hello");
			switch(jobcategory){
				case "Frame":
				case "frame":
					j=0;
					break;
				case "Spring":
				case "spring":
					j=1;
					break;
				case "Alignment":
				case "alignment":
					j=2;
					break;
				case "King Pin":
				case "kingPin":
					j=3;
					break;
					default:
					break;
			}
			try{
			while (document.getElementById('wfw'+j).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						j+=4;
						
					}
					//alert(e);
				//alert(j);
					document.getElementById('wfw'+j).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>bad shop location</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
			
			}
			catch(e){
				j=0;
				while (document.getElementById('wfw'+j).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						j++;
						
					}
					//alert(e);
				
					document.getElementById('wfw'+j).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.WFW[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttWfw" + i + "'>bad shop location</span><span class='info' id='j" + i + "info'></span><span class='jobCat' id='j" + i + "Cat'></span></div>";
			}
			
		}
				if (vehicles.WFW[i].cash == "-1") {
					document.getElementById('j' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg)";
					document.getElementById('j' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WFW[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WFW[i].unitNumber + " <span class='money'><b>$"+vehicles.WFW[i].estCost+"</b></span><br/>" + vehicles.WFW[i].make;
				
				}
				if(vehicles.WFW[i].waiting == "-1"){
					document.getElementById('j' + i + 'info').style.backgroundImage = "url(waiting.jpg)";
				
				}
				if (vehicles.WFW[i].cash == "-1" && vehicles.WFW[i].waiting == "-1") {
					document.getElementById('j' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg), url(waiting.jpg)";
				}
				if(vehicles.WFW[i].comeback == "-1"){
					document.getElementById('j' + i + 'info').style.backgroundImage = "url(warningLegend.png)";
					document.getElementById('j' + i + 'info').style.backgroundPosition = "right top";
				}
				if(vehicles.WFW[i].comeback == "-1" && vehicles.WFW[i].cash == "-1"){
					document.getElementById('j' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg)";
					document.getElementById('j' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.WFW[i].comeback == "-1" && vehicles.WFW[i].waiting == "-1"){
					document.getElementById('j' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(waiting.jpg)";
					document.getElementById('j' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.WFW[i].comeback == "-1" && vehicles.WFW[i].cash == "-1" && vehicles.WFW[i].waiting == "-1"){
					document.getElementById('j' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg), url(waiting2.jpg)";
					document.getElementById('j' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				}
				if(vehicles.WFW[i].parts=="-1"){
				document.getElementById('j' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#a3A3C2;text-decoration:line-through'>"+vehicles.WFW[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WFW[i].unitNumber + " <br/>" + vehicles.WFW[i].make;
					if(vehicles.WFW[i].parts=="-1" && vehicles.WFW[i].cash == "-1" && vehicles.WFW[i].estCost != ""){
				document.getElementById('j' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#a3A3C2;text-decoration:line-through'>"+vehicles.WFW[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WFW[i].unitNumber + " <span class='money'><b>$"+vehicles.WFW[i].estCost+"</b></span><br/>" + vehicles.WFW[i].make;
					
				}
				}
				
				else{
					if (vehicles.WFW[i].cash == "-1" && vehicles.WFW[i].estCost != "") {
						document.getElementById('j' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WFW[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WFW[i].unitNumber + " <span class='money'><b>$" +vehicles.WFW[i].estCost+ "</b></span><br/>" + vehicles.WFW[i].make;
				
					}
					else{
					document.getElementById('j' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WFW[i].custName.toUpperCase() + "</b><br/> #" + vehicles.WFW[i].unitNumber + "<br/>" + vehicles.WFW[i].make;
					}	
					}
				document.getElementById('ttWfw' + i).innerHTML = vehicles.WFW[i].dateIn + "<br/> " + vehicles.WFW[i].custName.toUpperCase() + " #" + vehicles.WFW[i].unitNumber + "<br/>" + vehicles.WFW[i].make + "<br/>Est Cost:$" + vehicles.WFW[i].estCost;

				var jobType = vehicles.WFW[i].jobCat;
				//alert(jobType);
				switch(jobType) {
					//alert(jobType);
					case "Frame":
					case "frame":
					
						document.getElementById('j' + i + 'Cat').style.backgroundColor = "red";
						break;
					case "Spring":
					case "spring":
						document.getElementById('j' + i + 'Cat').style.backgroundColor = "blue";
						break;
					case "Alignment":
					case "alignment":
						document.getElementById('j' + i + 'Cat').style.backgroundColor = "purple";
						break;
					case "King Pin":
					case "kingPin":
						document.getElementById('j' + i + 'Cat').style.backgroundColor = "green";
						break;
					case "Check All":
						document.getElementById('j' + i + 'Cat').style.backgroundColor = "orange";
						break;
					default:
						break;
				}

			}
		}

		function fillWIP() {
			//alert(vehicles.WIP.length);
			for ( i = 0; i < vehicles.WIP.length; i++) {
				//alert(i);

				document.getElementById(vehicles.WIP[i].shopLocation).innerHTML = "<div onclick='getEditVehicle(this)' class='vehicle' id='drag" + vehicles.WIP[i].xmlPosition + "' draggable='true' ondragstart='drag(event)' ondrop='drop(event)' ondragover='allowDrop(event)'><span class='tooltip' id='ttWip" + i + "'>Content 1</span><span class='info' id='wip" + i + "info'></span><span class='jobCat' id='wip" + i + "Cat'></span></div>";

				if (vehicles.WIP[i].cash == "-1") {
					document.getElementById('wip' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg)";
					document.getElementById('wip' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WIP[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WIP[i].unitNumber + " <span class='money'><b>$"+vehicles.WIP[i].estCost+"</b></span><br/>" + vehicles.WIP[i].make;
				
				}
				if(vehicles.WIP[i].waiting == "-1"){
					document.getElementById('wip' + i + 'info').style.backgroundImage = "url(waiting.jpg)";
				
				}
				if(vehicles.WIP[i].waiting == "-1" && vehicles.WIP[i].cash == "-1"){
					document.getElementById('wip' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg), url(waiting2.jpg)";
					//document.getElementById('wip' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				
				}
				if(vehicles.WIP[i].comeback == "-1"){
					document.getElementById('wip' + i + 'info').style.backgroundImage = "url(warningLegend.png)";
					document.getElementById('wip' + i + 'info').style.backgroundPosition = "right top";
				}
				if(vehicles.WIP[i].comeback == "-1" && vehicles.WIP[i].cash == "-1"){
					document.getElementById('wip' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg)";
					document.getElementById('wip' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.WIP[i].comeback == "-1" && vehicles.WIP[i].waiting == "-1"){
					document.getElementById('wip' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(waiting.jpg)";
					document.getElementById('wip' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.WIP[i].comeback == "-1" && vehicles.WIP[i].cash == "-1" && vehicles.WIP[i].waiting == "-1"){
					document.getElementById('wip' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg), url(waiting2.jpg)";
					document.getElementById('wip' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				}
				if(vehicles.WIP[i].parts=="-1"){
				document.getElementById('wip' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through'>"+vehicles.WIP[i].custName.toUpperCase() +"</b><br/> #:" + vehicles.WIP[i].unitNumber + " <br/>" + vehicles.WIP[i].make;
					if(vehicles.WIP[i].parts=="-1" && vehicles.WIP[i].cash =="-1" && vehicles.WIP[i].estCost != ""){
				document.getElementById('wip' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through'>"+vehicles.WIP[i].custName.toUpperCase() +"</b><br/> #:" + vehicles.WIP[i].unitNumber + " <span class='money'><b>$"+vehicles.WIP[i].estCost+"</b></span><br/>" + vehicles.WIP[i].make;
						
				}	
				}
				else{
				if (vehicles.WIP[i].cash == "-1" && vehicles.WIP[i].estCost != "") {
						document.getElementById('wip' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WIP[i].custName.toUpperCase() +"</b><br/> #" + vehicles.WIP[i].unitNumber + " <span class='money'><b>$" +vehicles.WIP[i].estCost+ "</b></span><br/>" + vehicles.WIP[i].make;
				
					}
					else{
					document.getElementById('wip' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.WIP[i].custName.toUpperCase() + "</b><br/> #" + vehicles.WIP[i].unitNumber + "<br/>" + vehicles.WIP[i].make;
					}	
				}
				document.getElementById('ttWip' + i).innerHTML = vehicles.WIP[i].dateIn + "<br/> " + vehicles.WIP[i].custName.toUpperCase() + "<br/> #" + vehicles.WIP[i].unitNumber + "<br/>" + vehicles.WIP[i].make + "<br/>Est Cost:$" + vehicles.WIP[i].estCost;

				var jobType = vehicles.WIP[i].jobCat;
				switch(jobType) {
					case "frame":
					case "Frame":
						document.getElementById('wip' + i + 'Cat').style.backgroundColor = "red";
						break;
					case "spring":
					case "Spring":
						document.getElementById('wip' + i + 'Cat').style.backgroundColor = "blue";
						break;
					case "alignment":
					case "Alignment":
						document.getElementById('wip' + i + 'Cat').style.backgroundColor = "purple";
						break;
					case "kingPin":
					case "King Pin":
						document.getElementById('wip' + i + 'Cat').style.backgroundColor = "green";
						break;
					case "Check All":
					
						document.getElementById('wip' + i + 'Cat').style.backgroundColor = "orange";
						break;
					default:
						break;
				}
			}
		}
				function fillSCH() {
			//alert(vehicles.WIP.length);
			for ( i = 0; i < vehicles.SCH.length; i++) {
				//alert(i);
				if (vehicles.SCH[i].shopLocation !== 'new') {
					//alert(vehicles.WFW[i].shopLocation);
					document.getElementById(vehicles.SCH[i].shopLocation).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.SCH[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttSch" + i + "'>not new</span><span class='info' id='sch" + i + "info'></span><span class='jobCat' id='sch" + i + "Cat'></span></div>";
					
				}else{
					var j=0;
					while (document.getElementById('sch'+j).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						j+=1;
						
					}
					document.getElementById('sch'+j).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.SCH[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttSch" + i + "'>not new</span><span class='info' id='sch" + i + "info'></span><span class='jobCat' id='sch" + i + "Cat'></span></div>";
					
				}
				//document.getElementById(vehicles.SCH[i].shopLocation).innerHTML = "<div onclick='getEditVehicle(this)' class='vehicle' id='drag" + vehicles.SCH[i].xmlPosition + "' draggable='true' ondragstart='drag(event)' ondrop='drop(event)' ondragover='allowDrop(event)'><span class='tooltip' id='ttSch" + i + "'>Content 1</span><span class='info' id='sch" + i + "info'></span><span class='jobCat' id='sch" + i + "Cat'></span></div>";

				if (vehicles.SCH[i].cash == "-1") {
					document.getElementById('sch' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg)";
					document.getElementById('sch' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.SCH[i].custName.toUpperCase() +"</b><br/> #" + vehicles.SCH[i].unitNumber + " <span class='money'><b>$"+vehicles.SCH[i].estCost+"</b></span><br/>" + vehicles.SCH[i].make;
				
				}
				if(vehicles.SCH[i].waiting == "-1"){
					document.getElementById('sch' + i + 'info').style.backgroundImage = "url(waiting.jpg)";
				
				}
				if(vehicles.SCH[i].waiting == "-1" && vehicles.SCH[i].cash == "-1"){
					document.getElementById('sch' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg), url(waiting2.jpg)";
					//document.getElementById('sch' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				
				}
				if(vehicles.SCH[i].comeback == "-1"){
					document.getElementById('sch' + i + 'info').style.backgroundImage = "url(warningLegend.png)";
					document.getElementById('sch' + i + 'info').style.backgroundPosition = "right top";
				}
				if(vehicles.SCH[i].comeback == "-1" && vehicles.SCH[i].cash == "-1"){
					document.getElementById('sch' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg)";
					document.getElementById('sch' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.SCH[i].comeback == "-1" && vehicles.SCH[i].waiting == "-1"){
					document.getElementById('sch' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(waiting.jpg)";
					document.getElementById('sch' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.SCH[i].comeback == "-1" && vehicles.SCH[i].cash == "-1" && vehicles.SCH[i].waiting == "-1"){
					document.getElementById('sch' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg), url(waiting2.jpg)";
					document.getElementById('sch' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				}
				if(vehicles.SCH[i].parts=="-1"){
				document.getElementById('sch' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through'>"+vehicles.SCH[i].custName.toUpperCase() +"</b><br/> #:" + vehicles.SCH[i].unitNumber + " <br/>" + vehicles.SCH[i].make;
					if(vehicles.SCH[i].parts=="-1" && vehicles.SCH[i].cash == "-1" && vehicles.SCH[i].estCost != ""){
				document.getElementById('sch' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through'>"+vehicles.SCH[i].custName.toUpperCase() +"</b><br/> #:" + vehicles.SCH[i].unitNumber + " <span class='money'><b>$"+vehicles.SCH[i].estCost+"</b></span><br/>" + vehicles.SCH[i].make;
					
				}
				}
				else{
				if (vehicles.SCH[i].cash == "-1" && vehicles.SCH[i].estCost != "") {
						document.getElementById('sch' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.SCH[i].custName.toUpperCase() +"</b><br/> #" + vehicles.SCH[i].unitNumber + " <span class='money'><b>$" +vehicles.SCH[i].estCost+ "</b></span><br/>" + vehicles.SCH[i].make;
				
					}
					else{
					document.getElementById('sch' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.SCH[i].custName.toUpperCase() + "</b><br/> #" + vehicles.SCH[i].unitNumber + "<br/>" + vehicles.SCH[i].make;
					}	
				}
				document.getElementById('ttSch' + i).innerHTML = vehicles.SCH[i].dateIn + "<br/> " + vehicles.SCH[i].custName.toUpperCase() + "<br/> #" + vehicles.SCH[i].unitNumber + "<br/>" + vehicles.SCH[i].make + "<br/>Est Cost:$" + vehicles.SCH[i].estCost;

				var jobType = vehicles.SCH[i].jobCat;
				switch(jobType) {
					case "frame":
					case "Frame":
						document.getElementById('sch' + i + 'Cat').style.backgroundColor = "red";
						break;
					case "spring":
					case "Spring":
						document.getElementById('sch' + i + 'Cat').style.backgroundColor = "blue";
						break;
					case "alignment":
					case "Alignment":
						document.getElementById('sch' + i + 'Cat').style.backgroundColor = "purple";
						break;
					case "kingPin":
					case "King Pin":
						document.getElementById('sch' + i + 'Cat').style.backgroundColor = "green";
						break;
					case "Check All":
					
						document.getElementById('sch' + i + 'Cat').style.backgroundColor = "orange";
						break;
					default:
						break;
				}
			}
		}
		function fillPOS() {
			//alert(vehicles.WIP.length);
			for ( i = 0; i < vehicles.POS.length; i++) {
				//alert(i);
				if (vehicles.POS[i].shopLocation !== 'new') {
					//alert(vehicles.WFW[i].shopLocation);
					document.getElementById(vehicles.POS[i].shopLocation).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.POS[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttPos" + i + "'>not new</span><span class='info' id='pos" + i + "info'></span><span class='jobCat' id='pos" + i + "Cat'></span></div>";
					
				}else{
					var j=0;
					while (document.getElementById('pos'+j).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						j+=1;
						
					}
					document.getElementById('pos'+j).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.POS[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttPos" + i + "'>not new</span><span class='info' id='pos" + i + "info'></span><span class='jobCat' id='pos" + i + "Cat'></span></div>";
					
				}
				//document.getElementById(vehicles.SCH[i].shopLocation).innerHTML = "<div onclick='getEditVehicle(this)' class='vehicle' id='drag" + vehicles.SCH[i].xmlPosition + "' draggable='true' ondragstart='drag(event)' ondrop='drop(event)' ondragover='allowDrop(event)'><span class='tooltip' id='ttSch" + i + "'>Content 1</span><span class='info' id='sch" + i + "info'></span><span class='jobCat' id='sch" + i + "Cat'></span></div>";

				if (vehicles.POS[i].cash == "-1") {
					document.getElementById('pos' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg)";
					document.getElementById('pos' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.POS[i].custName.toUpperCase() +"</b><br/> #" + vehicles.POS[i].unitNumber + " <span class='money'><b>$"+vehicles.POS[i].estCost+"</b></span><br/>" + vehicles.POS[i].make;
				
				}
				if(vehicles.POS[i].waiting == "-1"){
					document.getElementById('pos' + i + 'info').style.backgroundImage = "url(waiting.jpg)";
				
				}
				if(vehicles.POS[i].waiting == "-1" && vehicles.POS[i].cash == "-1"){
					document.getElementById('pos' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg), url(waiting2.jpg)";
					//document.getElementById('sch' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				
				}
				if(vehicles.POS[i].comeback == "-1"){
					document.getElementById('pos' + i + 'info').style.backgroundImage = "url(warningLegend.png)";
					document.getElementById('pos' + i + 'info').style.backgroundPosition = "right top";
				}
				if(vehicles.POS[i].comeback == "-1" && vehicles.POS[i].cash == "-1"){
					document.getElementById('pos' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg)";
					document.getElementById('pos' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.POS[i].comeback == "-1" && vehicles.POS[i].waiting == "-1"){
					document.getElementById('pos' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(waiting.jpg)";
					document.getElementById('pos' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.POS[i].comeback == "-1" && vehicles.POS[i].cash == "-1" && vehicles.POS[i].waiting == "-1"){
					document.getElementById('pos' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg), url(waiting2.jpg)";
					document.getElementById('pos' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				}
				if(vehicles.POS[i].parts=="-1"){
				document.getElementById('pos' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through'>"+vehicles.POS[i].custName.toUpperCase() +"</b><br/> #:" + vehicles.POS[i].unitNumber + " <br/>" + vehicles.POS[i].make;
					if(vehicles.POS[i].parts=="-1" && vehicles.POS[i].cash == "-1" && vehicles.POS[i].estCost != ""){
				document.getElementById('pos' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through'>"+vehicles.POS[i].custName.toUpperCase() +"</b><br/> #:" + vehicles.POS[i].unitNumber + " <span class='money'><b>$"+vehicles.POS[i].estCost+"</b></span><br/>" + vehicles.POS[i].make;
						
				}	
				}
				else{
				if (vehicles.POS[i].cash == "-1" && vehicles.POS[i].estCost != "") {
						document.getElementById('pos' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.POS[i].custName.toUpperCase() +"</b><br/> #" + vehicles.POS[i].unitNumber + " <span class='money'><b>$" +vehicles.POS[i].estCost+ "</b></span><br/>" + vehicles.POS[i].make;
				
					}
					else{
					document.getElementById('pos' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.POS[i].custName.toUpperCase() + "</b><br/> #" + vehicles.POS[i].unitNumber + "<br/>" + vehicles.POS[i].make;
					}	
				}
				document.getElementById('ttPos' + i).innerHTML = vehicles.POS[i].dateIn + "<br/> " + vehicles.POS[i].custName.toUpperCase() + "<br/> #" + vehicles.POS[i].unitNumber + "<br/>" + vehicles.POS[i].make + "<br/>Est Cost:$" + vehicles.POS[i].estCost;

				var jobType = vehicles.POS[i].jobCat;
				switch(jobType) {
					case "frame":
					case "Frame":
						document.getElementById('pos' + i + 'Cat').style.backgroundColor = "red";
						break;
					case "spring":
					case "Spring":
						document.getElementById('pos' + i + 'Cat').style.backgroundColor = "blue";
						break;
					case "alignment":
					case "Alignment":
						document.getElementById('pos' + i + 'Cat').style.backgroundColor = "purple";
						break;
					case "kingPin":
					case "King Pin":
						document.getElementById('pos' + i + 'Cat').style.backgroundColor = "green";
						break;
					case "Check All":
					
						document.getElementById('pos' + i + 'Cat').style.backgroundColor = "orange";
						break;
					default:
						break;
				}
			}
		}
				function fillNPU() {
			//alert(vehicles.WIP.length);
			for ( i = 0; i < vehicles.NPU.length; i++) {
				//alert(i);
				if (vehicles.NPU[i].shopLocation !== 'new') {
					//alert(vehicles.WFW[i].shopLocation);
					document.getElementById(vehicles.NPU[i].shopLocation).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.NPU[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttNpu" + i + "'>not new</span><span class='info' id='npu" + i + "info'></span><span class='jobCat' id='npu" + i + "Cat'></span></div>";
					
				}else{
					var j=0;
					while (document.getElementById('npu'+j).hasChildNodes()) {//'wfw' + j
						//alert(document.getElementById('wfw'+j).hasChildNodes());
						j+=1;
						
					}
					document.getElementById('npu'+j).innerHTML = "<div class='vehicle' onclick='getEditVehicle(this)' id='drag" + vehicles.NPU[i].xmlPosition + "' draggable='true' ondragstart='drag(event)'><span class='tooltip' id='ttNpu" + i + "'>not new</span><span class='info' id='npu" + i + "info'></span><span class='jobCat' id='npu" + i + "Cat'></span></div>";
					
				}
				//document.getElementById(vehicles.SCH[i].shopLocation).innerHTML = "<div onclick='getEditVehicle(this)' class='vehicle' id='drag" + vehicles.SCH[i].xmlPosition + "' draggable='true' ondragstart='drag(event)' ondrop='drop(event)' ondragover='allowDrop(event)'><span class='tooltip' id='ttSch" + i + "'>Content 1</span><span class='info' id='sch" + i + "info'></span><span class='jobCat' id='sch" + i + "Cat'></span></div>";

				if (vehicles.NPU[i].cash == "-1") {
					document.getElementById('npu' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg)";
					document.getElementById('npu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.NPU[i].custName.toUpperCase() +"</b><br/> #" + vehicles.NPU[i].unitNumber + " <span class='money'><b>$"+vehicles.NPU[i].estCost+"</b></span><br/>" + vehicles.NPU[i].make;
				
				}
				if(vehicles.NPU[i].waiting == "-1"){
					document.getElementById('npu' + i + 'info').style.backgroundImage = "url(waiting.jpg)";
				
				}
				if(vehicles.NPU[i].waiting == "-1" && vehicles.NPU[i].cash == "-1"){
					document.getElementById('npu' + i + 'info').style.backgroundImage = "url(dollarSignSmall.jpg), url(waiting2.jpg)";
					//document.getElementById('sch' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				
				}
				if(vehicles.NPU[i].comeback == "-1"){
					document.getElementById('npu' + i + 'info').style.backgroundImage = "url(warningLegend.png)";
					document.getElementById('npu' + i + 'info').style.backgroundPosition = "right top";
				}
				if(vehicles.NPU[i].comeback == "-1" && vehicles.NPU[i].cash == "-1"){
					document.getElementById('npu' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg)";
					document.getElementById('npu' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.NPU[i].comeback == "-1" && vehicles.NPU[i].waiting == "-1"){
					document.getElementById('npu' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(waiting.jpg)";
					document.getElementById('npu' + i + 'info').style.backgroundPosition = "right top, left top";
				}
				if(vehicles.NPU[i].comeback == "-1" && vehicles.NPU[i].cash == "-1" && vehicles.NPU[i].waiting == "-1"){
					document.getElementById('npu' + i + 'info').style.backgroundImage = "url(warningLegend.png), url(dollarSignSmall.jpg), url(waiting2.jpg)";
					document.getElementById('npu' + i + 'info').style.backgroundPosition = "right top, left top, left top";
				}
				if(vehicles.NPU[i].parts=="-1"){
				document.getElementById('npu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through'>"+vehicles.NPU[i].custName.toUpperCase() +"</b><br/> #:" + vehicles.NPU[i].unitNumber + " <br/>" + vehicles.NPU[i].make;
					if(vehicles.NPU[i].parts=="-1" && vehicles.NPU[i].cash == "-1" && vehicles.NPU[i].estCost != ""){
				document.getElementById('npu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana;color:#A3A3C2;text-decoration:line-through'>"+vehicles.NPU[i].custName.toUpperCase() +"</b><br/> #:" + vehicles.NPU[i].unitNumber + " <span class='money'><b>$"+vehicles.NPU[i].estCost+"</b></span><br/>" + vehicles.NPU[i].make;
						
				}	
				}
				else{
				if (vehicles.NPU[i].cash == "-1" && vehicles.NPU[i].estCost != "") {
						document.getElementById('npu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.NPU[i].custName.toUpperCase() +"</b><br/> #" + vehicles.NPU[i].unitNumber + " <span class='money'><b>$" +vehicles.NPU[i].estCost+ "</b></span><br/>" + vehicles.NPU[i].make;
				
					}
					else{
					document.getElementById('npu' + i + 'info').innerHTML = "<b style='font-size:13px;font-family:Verdana'>"+vehicles.NPU[i].custName.toUpperCase() + "</b><br/> #" + vehicles.NPU[i].unitNumber + "<br/>" + vehicles.NPU[i].make;
					}	
				}
				document.getElementById('ttNpu' + i).innerHTML = vehicles.NPU[i].dateIn + "<br/> " + vehicles.NPU[i].custName.toUpperCase() + "<br/> #" + vehicles.NPU[i].unitNumber + "<br/>" + vehicles.NPU[i].make + "<br/>Est Cost:$" + vehicles.NPU[i].estCost;

				var jobType = vehicles.NPU[i].jobCat;
				switch(jobType) {
					case "frame":
					case "Frame":
						document.getElementById('npu' + i + 'Cat').style.backgroundColor = "red";
						break;
					case "spring":
					case "Spring":
						document.getElementById('npu' + i + 'Cat').style.backgroundColor = "blue";
						break;
					case "alignment":
					case "Alignment":
						document.getElementById('npu' + i + 'Cat').style.backgroundColor = "purple";
						break;
					case "kingPin":
					case "King Pin":
						document.getElementById('npu' + i + 'Cat').style.backgroundColor = "green";
						break;
					case "Check All":
					
						document.getElementById('npu' + i + 'Cat').style.backgroundColor = "orange";
						break;
					default:
						break;
				}
			}
		}
		function Remove(EId)
{
    return(EObj=document.getElementById(EId))?EObj.parentNode.removeChild(EObj):false;
}
		function clearWFW() {
			//alert("total slots "+wfwTotalSlots);
			for ( i = 0; i < 48; i++) {
				document.getElementById('wfw' + i).innerHTML = "";
			}
			for ( i = vehicles.WFW.length; i > 0; i--) {
				vehicles.WFW.pop();
				//alert(vehicles.WFW.length);
			}
			
			for (i=48;i<wfwTotalSlots;i++){
				
					Remove("wfw"+i);
				//document.getElementById("wfw"+i).outerHTML="";
				
			}
			
		}

		function clearWIP() {
			for ( i = 0; i < 12; i++) {
				document.getElementById('wip' + i).innerHTML = "";
			}
			for ( i = vehicles.WIP.length; i > 0; i--) {
				vehicles.WIP.pop();
				//alert(vehicles.WIP.length);
			}
		}

		function clearWFP() {
			for ( i = 0; i < 20; i++) {
				document.getElementById('wfp' + i).innerHTML = "";
			}
			for ( i = vehicles.WFP.length; i > 0; i--) {
				vehicles.WFP.pop();
			}
		}

		function clearWPU() {
			for ( i = 0; i < 20; i++) {
				document.getElementById('wpu' + i).innerHTML = "";
			}
			for ( i = vehicles.WPU.length; i > 0; i--) {
				vehicles.WPU.pop();
				//alert(vehicles.WPU.length);
			}
		}
			function clearSCH() {
			for ( i = 0; i < 20; i++) {
				document.getElementById('sch' + i).innerHTML = "";
			}
			for ( i = vehicles.SCH.length; i > 0; i--) {
				vehicles.SCH.pop();
				//alert(vehicles.WPU.length);
			}
		}
			function clearPOS() {
			for ( i = 0; i < 20; i++) {
				document.getElementById('pos' + i).innerHTML = "";
			}
			for ( i = vehicles.POS.length; i > 0; i--) {
				vehicles.POS.pop();
				//alert(vehicles.WPU.length);
			}
		}
			function clearNPU() {
			for ( i = 0; i < 20; i++) {
				document.getElementById('npu' + i).innerHTML = "";
			}
			for ( i = vehicles.NPU.length; i > 0; i--) {
				vehicles.NPU.pop();
				//alert(vehicles.WPU.length);
			}
		}

		function clearXML() {
			xmlVehicles = "";
		}

		function clearPage() {
			clearWFW();
			clearWIP();
			//clearWFP();
			clearWPU();
			clearXML();
			clearSCH();
			clearPOS();
			clearNPU();
		}

		function refresh() {
			clearPage();
			reloadPage();
			
		}

		function openAddBox(e) {
			//alert(document.getElementById("add").style.display);
			
			document.getElementById('my-form').innerHTML = " Customer: <input type='text' id='customer' name='customer' size='20'> Unit#: <input type='text' id='unit' name='unit' maxlength='30' size='10'> Notes: <input type='text' id='make' name='make' size='20'><br/> Cash:<input type='checkbox' id='cash'> Est. Cost: <input type='text' id='cost' name='cost' size='6'>  Parts or Approval Needed:<input type='checkbox' id='parts'>  Comeback: <input type='checkbox' id='comeback'>  Waiting:<input type='checkbox' id='waiting'>  &nbsp;<input type='submit' value='Submit'>";
			document.getElementById("unit").value = "";
			document.getElementById("make").value = "";
			document.getElementById("cost").value = "";
			document.getElementById("customer").value = "";
			
			document.getElementById("cash").checked = false;
			document.getElementById("waiting").checked = false;
			document.getElementById("parts").checked = false;
			document.getElementById("comeback").checked = false;
			jc = e.id;
			document.getElementById("customer").focus();
			//alert(jc);
			/*
			if (document.getElementById("add").style.display == "" || document.getElementById("add").style.display == "none") {

				document.getElementById("add").style.display = "block";
				//isOpen=e.innerHTML;
			} else {
				if (isOpen == e.innerHTML) {
					document.getElementById("add").style.display = "none";
				}
			}
			*/
			isOpen = true;
			
			var headerText=e.innerHTML;
			var eForm=document.getElementById("my-form");
			closeTimer = setTimeout(function(){ eForm.submit(); }, 60000);
			//alert(isOpen);
			if (e.innerHTML == "Frame" || e.innerHTML == "Spring" || e.innerHTML == "Alignment" || e.innerHTML == "King Pin") {
				document.getElementById("formHeader").innerHTML = "New " + e.innerHTML + " Job";
				document.getElementById("formHeader").className = "header";
				eForm.onsubmit=function (){processForm(eForm);};
			} else {
				document.getElementById("formHeader").innerHTML = "Edit Job";
				document.getElementById("formHeader").className = "header";
				loadEditForm();
			}
			switch(headerText){
				case "Frame":
					document.getElementById("formHeader").style.color= "red";
					break;
				case "Spring":
				document.getElementById("formHeader").style.color= "blue";
					break;
				case "Alignment":
				document.getElementById("formHeader").style.color= "purple";
					break;
				case "King Pin":
				document.getElementById("formHeader").style.color= "green";
					break;
					default:
					break;
				
			}
		}

		function loadEditForm() {

		}

		function processForm(e) {
			
			addVehicle();
			clearPage();
			fillPage();
			// You must return false to prevent the default form behavior
			clearTimeout(closeTimer);
			return false;
		}

		function today() {
			var day = date.getDate();
			var month = date.getMonth() + 1;
			var year = date.getFullYear();
			var today = month + "/" + day + "/" + year;
			return today;
		}

		//how to create a new node in xml
		//alert("function ca;;"+today());
		function addVehicle() {
			var newel = xmlDoc.createElement("vehicle");
			newel.setAttribute("custName", document.getElementById('customer').value);
			newel.setAttribute("unitNumber", document.getElementById('unit').value);
			newel.setAttribute("make", document.getElementById('make').value);
			newel.setAttribute("estCost", document.getElementById('cost').value);
			newel.setAttribute("dateIn", today());
			newel.setAttribute("jobCat", jc);
			newel.setAttribute("status", "wfw");
			newel.setAttribute("cash", document.getElementById('cash').checked);
			newel.setAttribute("waiting", document.getElementById('waiting').checked);
			newel.setAttribute("comeback", document.getElementById('comeback').checked);
			newel.setAttribute("parts", document.getElementById('parts').checked);
			newel.setAttribute("shopLocation", "new");

			xmlDoc.getElementsByTagName("workflow")[0].appendChild(newel);

			//alert(x.xml);
			xmlDoc.save("fs.xml");
		}
		function addNewVehicle() {
			var originOptions=document.getElementById("selOrigin");
			var selectedOrigin=originOptions.options[originOptions.selectedIndex].text;
			var newStatus;
			switch(selectedOrigin){
				case "On the Lot":
					newStatus="wfw";
					break;
				case "Call:Scheduled":
					newStatus="sch";
					break;
				case "Call:Possible":
				newStatus="pos";
					break;
				case "Needs Picked Up":
					newStatus="npu";
					break;
				default:
					newStatus="wfw";
					break;
			}
			var newel = xmlDoc.createElement("vehicle");
			newel.setAttribute("custName", document.getElementById('txtCustomerName').value);
			newel.setAttribute("unitNumber", document.getElementById('txtUnit').value);
			newel.setAttribute("make", document.getElementById('txtNotes').value);
			newel.setAttribute("estCost", document.getElementById('txtCost').value);
			newel.setAttribute("dateIn", today());
			//newel.setAttribute("jobCat", jc);
			newel.setAttribute("status", newStatus);
			newel.setAttribute("cash", document.getElementById('cbCash').checked);
			newel.setAttribute("waiting", document.getElementById('cbWaiting').checked);
			newel.setAttribute("comeback", document.getElementById('cbComeback').checked);
			newel.setAttribute("parts", document.getElementById('cbParts').checked);
			newel.setAttribute("shopLocation", "new");
			var jtOptions =document.getElementById("selJobType");
			newel.setAttribute("jobCat",jtOptions.options[jtOptions.selectedIndex].text);
			
			newel.setAttribute("origin",selectedOrigin);
			xmlDoc.getElementsByTagName("workflow")[0].appendChild(newel);

			//alert(x.xml);
			xmlDoc.save("fs.xml");
		}

		function setNewLocation() {
			//alert("setNewLocation"+loc);
			xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("status", newStatus);
			//alert(newStatus);
			//if(newStatus=="wip"){
			xmlDoc.getElementsByTagName("workflow")[0].childNodes[loc].setAttribute("shopLocation", ns);
			//}
			xmlDoc.save("fs.xml");
			//fillPage();
		}

		function getEditVehicle(e) {
			//var thisVehicle="vehicles."+e.id.substr(0,3)+"["+e.id.substr(4,2)+"].status";
			openAddBox(e);
			var c = e.id.substr(4, 2);
			//alert(e.parentNode.id);
			//var l=e.parentNode.id.substr(0,3).toUpperCase();
			//alert(l);
			//var thisVehicleCustomer=vehicles.WFW[c-1].custName;
			//alert(thisVehicleCustomer);
			
			pullData();
			
			//alert(c);
			vehicleToEdit = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c];
			eName = vehicleToEdit.getAttribute("custName");
			eCash = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("cash");
			eUnit = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("unitNumber");
			eMake = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("make");
			eCost = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("estCost");
			eJobCat = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("jobCat");
			eWaiting = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("waiting");
			eDate = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("dateIn");
			eParts = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("parts");
			eComeback = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c].getAttribute("comeback");
			
			
			//alert(b);
			//alert(c);
			var f = document.getElementById("my-form").innerHTML;
			var eForm=document.getElementById("my-form");

			var r = "Date In: <input type='text' id='date' size='10'> <select id='jtSelect'><option id='frameOption' value='option1'>Frame</option><option id='springOption' value='option2'>Spring</option><option id='alignmentOption' value='option3'>Alignment</option><option id='kingPinOption' value='option4'>King Pin</option><option id='checkAllOption' value='option5'>Check All</option></select>";
			document.getElementById("my-form").innerHTML = r + f;
			document.getElementById("customer").value = eName;
			//alert(eCash);
			if (eCash < 0) {
				document.getElementById("cash").checked = true;
			} else {
				document.getElementById("cash").checked = false;
			}
			if (eWaiting < 0) {
				document.getElementById("waiting").checked = true;
			} else {
				document.getElementById("waiting").checked = false;
			}
			if (eComeback < 0) {
				document.getElementById("comeback").checked = true;
			} else {
				document.getElementById("comeback").checked = false;
			}
			if (eParts < 0) {
				document.getElementById("parts").checked = true;
			} else {
				document.getElementById("parts").checked = false;
			}
			document.getElementById("unit").value = eUnit;
			document.getElementById("make").value = eMake;
			document.getElementById("cost").value = eCost;
			document.getElementById("date").value = eDate;
			//alert(eCost);
			switch(eJobCat){
				case "frame":
				case "Frame":
				document.getElementById('frameOption').setAttribute("selected","selected");
				document.getElementById("formHeader").style.color= "red";
				break;
				case "spring":
				case "Spring":
				document.getElementById('springOption').setAttribute("selected","selected");
				document.getElementById("formHeader").style.color= "blue";
				break;
				case "alignment":
				case "Alignment":
				document.getElementById('alignmentOption').setAttribute("selected","selected");
				document.getElementById("formHeader").style.color= "purple";
				break;
				case "kingPin":
				case "King Pin":
				document.getElementById('kingPinOption').setAttribute("selected","selected");
				document.getElementById("formHeader").style.color= "green";
				break;
				case "Check All":
				document.getElementById('checkAllOption').setAttribute("selected","selected");
				document.getElementById("formHeader").style.color= "orange";
				break;
				default:
				break;
			}
			
			
		    eForm.onsubmit=function(){
				//alert("edit function on submit");
				//pullData();
				//vehicleToEdit = xmlDoc.getElementsByTagName("workflow")[0].childNodes[c];
				
				vehicleToEdit.setAttribute("custName",document.getElementById("customer").value);
				vehicleToEdit.setAttribute("cash",document.getElementById("cash").checked);
				vehicleToEdit.setAttribute("waiting",document.getElementById("waiting").checked);
				vehicleToEdit.setAttribute("unitNumber",document.getElementById("unit").value);
				vehicleToEdit.setAttribute("make",document.getElementById("make").value);
				vehicleToEdit.setAttribute("comeback",document.getElementById("comeback").checked);
				vehicleToEdit.setAttribute("parts",document.getElementById("parts").checked);
				vehicleToEdit.setAttribute("estCost",document.getElementById("cost").value);
				vehicleToEdit.setAttribute("dateIn",document.getElementById("date").value);
				//vehicleToEdit.setAttribute("custName",document.getElementById("customer").value);
				var jtOptions =document.getElementById("jtSelect");
				vehicleToEdit.setAttribute("jobCat",jtOptions.options[jtOptions.selectedIndex].text);
				xmlDoc.save("fs.xml");
				
				isOpen=false;
				clearTimeout(closeTimer);
			};
			
			
			
			//alert(document.getElementById("my-form").childNodes[1].id);

			//f.appendChild('newdiv');
			//newdiv.setAttribute("")
			
		}
		function setEditVehicle(){
			alert("onSubmit changed to setEditVehicle()");
			//xmlDoc.save("fs.xml");
		}
		function checkIfFull(){
			//alert(vehicles.WPU.length);
		if(vehicles.WPU.length>19){
		alert("The Job Complete section is full. Please delete picked up vehicles from the Job Complete section.");
		}
	}
			function callBackup(){
			var WshShell = new ActiveXObject("WScript.Shell");
			WshShell.Run("backupXML.bat",1,true);
		}
		function callRestore(){
			var WshShell = new ActiveXObject("WScript.Shell");
			WshShell.Run("restoreXML.bat",1,true);
			reloadPage();
		}
		function printDiv(divName) {
      var printContents = document.getElementById(divName).innerHTML;     
   var originalContents = document.body.innerHTML;       
   document.body.innerHTML = printContents;      
   window.print();      
   document.body.innerHTML = originalContents;
   }
	</script>
</div>

</body>
</html>